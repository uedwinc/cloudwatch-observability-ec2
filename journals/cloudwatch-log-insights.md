# Exploring CloudWatch Logs Insights

Logs Insights is a feature of CloudWatch Logs that allows querying log groups without exporting them to an external tool.

By default, there are five discovered system fields – namely, [@message], [@timestamp], [@ingestiontime], [@logStream], and [@log]. Field names that start with the @ character are automatically generated by Logs Insights.

It is simple yet powerful as there are only seven commands in Logs Insights – namely, display, fields, filter, stats, sort, limit, and parse. It has built-in support for functions and operators such as arithmetic operators (addition, subtraction, multiplication, etc.), Boolean operators (and, or, not), comparison operators (=, <, >, >=, <=, =!), numeric operators (greatest, least, ceil, etc.), Datetime functions, general functions (ispresent, coalesce), string functions (replace, strlen, etc.), and stats aggregation functions (avg, count, etc.). Each query can include one or more query commands separated by a Unix-style format.

We have generated a few logs as a part of application logs for AWS Lambda with the log group name `/aws/lambda/random-name`. Let’s explore the logs in the log group using Logs Insights:

1. In the AWS Management Console, navigate to `CloudWatch` | `Logs` | `Logs Insights`

2. From the dropdown, select the `random-name` log group or `IISLogs` and click `Run query`, which will execute the default query from the log. If you don’t see any results, you can adjust the period in the right corner as required to query the logs:

```
fields @timestamp, @message
| sort @timestamp desc
| limit 10000
```

Executing the default query, as in the preceding block, will display the `timestamp` and `message` fields, sort them by timestamp in descending order, and limit the number of results to the top 10000, as shown in the figure.

![log-in-1](/imgs/log-in-1.png)

![log-in-2](/imgs/log-in-2.png)

3. When you click on the `Discovered fields` button on the right side, you will see the additional discovered fields from the logs, and you can also check the percentage field availability against each column.

![discovered-fields](/imgs/discovered-fields.png)

4. If you would like to know the overall billed duration for a specific period for a Lambda function(s), you can select the log groups accordingly and execute the following query to get the total billed duration for a specific period:

```
fields @timestamp, @message
| sum(@billedDuration) as TotalDuration
```

> This will show the total duration of the Lambda function executed over the selected time period

> This is only if billedDuration is part of the discovered fields which will show up after the lambda function has run successfully