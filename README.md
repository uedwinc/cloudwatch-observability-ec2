# Operational Data with CloudWatch

- Gathering operational data from EC2 instance
- Gaining insights from operational data
- Setting up alarms and dashboards

When you launch an EC2 instance, whether Linux or Windows, CloudWatch will provide metrics related to the instance, such as CPU, network, and disk metrics, by default.

You can view the automatic dashboard generated by AWS CloudWatch by navigating to `CloudWatch –> Dashboard –> Automatic Dashboard –> EC2`. This should display the default AWS vended metrics provided by CloudWatch

Building upon the default vended metrics provided by AWS, there are certain metrics that are only visible to the guest operating system, such as memory metrics and page file utilization. In some cases, you also need to monitor application-level metrics, `Operating System (OS)` logs, or application logs. You can start monitoring these additional levels of detail by utilizing the `unified CloudWatch agent`.

- The unified CloudWatch agent: https://github.com/aws/amazon-cloudwatch-agent

- Agent download link documentation: https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/download-cloudwatch-agent-commandline.html

You can gather the OS metrics and log files from an EC2 instance using the CloudWatch agent. Additionally, you can also enable the Statsd and Collectd protocols, and the procstat plugin to gather application metrics, network metrics, and individual process level metrics respectively, and send them to the CloudWatch metrics namespace.

## Deployment and configuration of the CloudWatch agent in an EC2 instance to gather custom metrics and logs

To build a Windows EC2 instance along with the `Internet Information Services (IIS)` web server. The prerequisites are as follows:

- Set up an EC2 Windows instance with the IIS web server. To set up the EC2 Windows instance, follow the instructions at https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/EC2_GetStarted.html.

- As we launch the EC2 instance, we will use `User data` to install the IIS web server. Let’s configure the security group to allow port 80 to allow http requests, along with `Remote Desktop Protocol (RDP)` port `3389`, for the EC2 instance to allow the web application to be accessible from the internet. This will allow you to generate user access logs and capture them using the CloudWatch agent when you browse the web application.

- To install the IIS web server, copy the following script to `User data`:

```sh
<powershell>
Install-WindowsFeature -name Web-Server -IncludeManagementTools
</powershell>
```

### Manual installation and configuration of the CloudWatch agent
